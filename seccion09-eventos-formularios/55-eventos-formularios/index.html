<!--  ************************************************************************************************************************  -->
<!--  **********  /02-domina-el-dom-con-javascript/seccion09-eventos-formularios/55-eventos-formularios/index.html  **********  -->
<!--  ************************************************************************************************************************  -->


<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <title> Sección 09 - Manejo de los Eventos y Elementos de un Formulario - Domina el DOM con JavaScript -
        Udemy - Francisco
        Javier Arce Anguiano </title>

    <!--  **********  Favicon  **********  -->
    <link rel="icon" href="img/favicon-JS-2.ico">

    <!--  **********  Estilos  **********  -->
    <style>
        body {
            background-color: gray;
            background-size: 100%;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: center;
        }

        .header {
            width: 100%;
            height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border: 1px solid green;
        }

        .main {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            justify-content: center;
            /* align-items: center; */
            text-align: center;
            margin-top: 20px;
            gap: 50px;
            font-size: 16px;
        }

        .botones-container {
            display: flex;
            gap: 100px;
        }

        .botones {
            display: flex;
            flex-direction: column;
            gap: 0;
        }

        button,
        #enviar,
        #limpiar,
        .enviar {
            width: auto;
            color: white;
            background-color: blueviolet;
            padding: 10px;
            border-radius: 15px;
            cursor: pointer;
        }

        span {
            /* background-color: aquamarine; */
            color: black;
            font-size: 18px;
            text-align: center;
        }

        img {
            margin-left: 6px;
            margin-right: 6px;
            margin-top: 10px;
            cursor: pointer;
        }

        /*  **********  */
        form {
            display: flex;
            flex-direction: column;
        }

        .ejemplos {
            max-width: 600px;
            display: flex;
            flex-direction: column;
            padding: 20px;
            background-color: antiquewhite;
        }

        #botones {
            width: 150px;
            height: 180px;
            background-color: white;
            border: solid black 1px;
            display: flex;
            flex-direction: column;
            flex-wrap: wrap;
            justify-content: start;
            align-items: start;
        }

        #mensaje {
            box-sizing: border-box;
            padding: 12px;
            width: 400px;
            background-color: coral;
            color: white;
            margin: 50px auto;
            text-align: center;
            display: none;
            font-size: 22px;
        }

        .cerrar {
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .cerrar:hover {
            color: #000;
        }

        /*  **********  */

        .forma {
            background-color: orange;
            color: white;
            border: solid 2px white;
            /* margin-left: 20px; */
            width: 330px;
            padding: 10px;
        }

        .forma label {
            display: block;
            width: 120px;
            float: left;
            text-align: right;
            /* margin-bottom: 35px; */
            padding-right: 20px;
        }

        br {
            clear: left;
        }

        input[type="submit"] {
            margin: 25px 5px 10px 5px;
        }

        .campos-formulario {
            width: 100%;
            display: flex;
            justify-content: left;
            margin-bottom: 20px;
        }

        #fotoSelect {
            width: 600px;
        }

        #salidaSelect {
            width: 100%;
            height: 600px;
            background-color: aqua;
        }
    </style>

</head>


<body>

    <!--  **********  Header o Cabecera  **********  -->
    <header class="header">

        <h1> Sección 09 - Eventos y Elementos de un Formulario. </h1>
        <hr>
    </header>

    <!--  **********  Contenido  **********  -->
    <main class="main">

        <!--  -----  Formulario  -----  -->
        <section class="ejemplos">

            <h2> Formulario </h2>
            <form id="forma" name="forma" method="post" action="valida.php">
                <p>
                    <label for="clave1">Clave 1:</label>
                    <input type="password" name="clave1" id="clave1" />
                </p>
                <p>
                    <label for="clave2">Clave 2:</label>
                    <input type="password" name="clave2" id="clave2" />
                </p>

                <p>
                    <label for="nombre">Nombre:</label>
                    <input type="text" name="nombre" id="nombre" />
                </p>
                <p>
                    <input type="submit" name="enviar" id="enviar" value="Enviar" />
                    <input type="reset" name="limpiar" id="limpiar" value="Limpiar" />
                </p>

                <p>
                    <label for="boletin">¿Quieres recibir nuestro boletín?</label>
                    <input type="checkbox" name="boletin" id="boletin" />
                </p>
                <p>
                    <label for="correo">Correo electrónico:</label>
                    <input type="text" name="correo" id="correo" disabled="true" />
                </p>

            </form>

        </section>


        <!--  -----  CheckBox  -----  -->
        <section class="ejemplos">

            <h2> CheckBox </h2>
            <form id="botones">
                <p>Estado civil:</p>
                <div> <input type="radio" name="estado" value="1" checked> Soltero <br> </div>
                <div> <input type="radio" name="estado" value="2"> Casado <br> </div>
                <div> <input type="radio" name="estado" value="3"> Divorciado <br> </div>
                <div> <input type="radio" name="estado" value="4"> Viudo<br> </div>
                <div> <input type="radio" name="estado" value="5"> Es complicado <br> </div>
            </form>

            <div id="mensaje">
                <span id="tache" class="cerrar">&times;</span>
                <p id="enunciado">&nbsp;</p>
            </div>

        </section>


        <!--  -----  Cajas de Entrada  -----  -->
        <section class="ejemplos">

            <h2> Cajas de Entrada </h2>
            <div class="forma">
                <form id="cajasEntrada" name="contacto" method="get" action="#">

                    <div class="campos-formulario">
                        <label>Nombre:</label>
                        <input id="nombreContacto" name="nombre" type="text" />
                    </div>

                    <div class="campos-formulario">
                        <label>Apellidos:</label>
                        <input id="apellidos" name="apellidos" type="text" />
                    </div>

                    <div class="campos-formulario">
                        <label>Dirección:</label>
                        <input id="direccion" name="direccion" type="text" />
                    </div>

                    <div class="campos-formulario">
                        <label>Estado Civil:</label>
                        <input type="radio" name="estado" id="soltero" value="soltero" />Soltero
                        <input type="radio" name="estado" id="casado" value="casado" />Casado
                    </div>

                    <div class="campos-formulario">
                        <label>Idoma:</label>
                        <select id="idioma" name="Idioma">
                            <option value="">Elija un idioma</option>
                            <option value="espanol">Español</option>
                            <option value="ingles">Inglés</option>
                            <option value="frances">Francés</option>
                        </select>
                    </div>

                    <div class="campos-formulario">
                        <label>Preferencias</label>
                        <input name="cantar" type="checkbox" />Cantar
                        <input name="bailar" type="checkbox" />Bailar
                    </div>

                    <input type="submit" value="Enviar" class="enviar" />

                </form>

            </div>

        </section>


        <!--  -----  Listas Select y Option  -----  -->
        <section class="ejemplos">

            <h2> Select y Option </h2>
            <select id="fotoSelect">
                <option value="0">-Selecciona una imágen-</option>
                <option value="1">El partenón</option>
                <option value="2">La nebulosa de Andrómeda</option>
                <option value="3">Una villa ateniense</option>
                <option value="4">El partenón de noche</option>
                <option value="5">Atardecer ateniense</option>
                <option value="6">El partenón</option>
            </select>
            <div id="salidaSelect"></div>

        </section>


    </main>


    <!--  **********  Código JS  **********  -->
    <script>

        window.onload = function () {

            //Instancias
            const forma = document.getElementById("forma");
            const clave1 = document.getElementById("clave1");
            const clave2 = document.getElementById("clave2");

            //  -----  Listeners para detectar el envio de la forma  -----
            forma.onsubmit = function () {
                //Recuperamos los dos valores de cada caja
                const valor1 = clave1.value;
                const valor2 = clave2.value;

                //  -----  Verificamos que no esten vacio los campos|| OR && AND
                if (valor1 == "" || valor2 == "") alert("Claves erróneas");
                else if (valor1 != valor2) alert("Claves no coinciden");
                else {
                    alert("Claves correctas, enviando la información");
                    return true;
                }
                return false;
            }

            //  -----  Listener para el Reseteo del Formulario  -----
            forma.onreset = function () {
                return confirm("¿Desea limpiar los datos?\nSe perderá la información.");
            }


            //  -----  keypress  -----
            const nombre = document.getElementById("nombre");
            nombre.onkeypress = function (e) {

                //Safari no tiene la propiedad "key"
                const k = e.key;
                const patt = /[0-9]+/;
                const res = patt.test(k);
                if (res) alert("No puede escribir números en un nombre");
                return !res;
            }


            //  -----  Prppiedades  -----
            document.getElementById("boletin").onchange = function () {

                console.log("valor: " + this.value + "\nForma: " + this.form + "\nNombre: " + this.name + "\n Tipo: " + this.type, this.checked);
                alert("valor: " + this.value + "\nForma: " + this.form + "\nNombre: " + this.name + "\n Tipo: " + this.type, this.checked);

                if (this.checked) {
                    this.form.correo.disabled = false;
                } else {
                    this.form.correo.disabled = true;
                    this.form.correo.value = "";
                }
            }


            //  ----------  CheckBox  ----------

            document.getElementById("tache").onclick = function () {
                this.parentNode.style.display = 'none';
            }


            //  -----  Guardamos todos los onchange  -----
            const estadoCivil = document.querySelectorAll('#botones input[type=radio]');
            for (let i = 0; i < estadoCivil.length; i++) {
                estadoCivil[i].onchange = cambiaFoto;
            }

            //  -----  función para cambiar la foto  -----
            function cambiaFoto(e) {

                //  -----  value de cada checkbox  -----
                const foto = e.target.value;
                console.log(foto);

                //  -----  Guardamos la direccion del archivo para el fondo  -----
                const archivoImgFondo = "url('imagenes/fondos/minis/fondo" + foto + ".jpg')";
                console.log(archivoImgFondo);

                //  -----  fondo del body la imagen del archivo seleccionado  -----
                document.body.style.backgroundImage = archivoImgFondo;

                //  -----  mensaje segun la foto seleccionada  -----
                let mensaje = "Lo invitamos a un viaje a Grecia, ";
                let mensaje2 = "";
                switch (foto) {
                    case "1":
                        mensaje2 = "donde podrás conocer a más personas solteras ";
                        break;
                    case "2":
                        mensaje2 = "donde podrás disfrutar a tu familia ";
                        break;
                    case "3":
                        mensaje2 = "donde podrás olvidar tus problemas ";
                        break;
                    case "4":
                        mensaje2 = "donde podrás recordar tus mejores tiempos ";
                        break;
                    case "5":
                        mensaje2 = "para que tomes esa importante decisión ";
                        break;
                    default:
                        mensaje2 = "para que definas tu estado civil ";
                        break;
                }
                let mensaje3 = " en una extraordinaria experiencia en la cuna de la civilización.";

                //  -----  visualizamos caja para los mensajes  -----
                document.getElementById("mensaje").style.display = "block";

                //  -----  Añadimos los mensajes a la caja  -----
                document.getElementById("enunciado").innerHTML = mensaje + mensaje2 + mensaje3;

            }


            //  ----------  Eventos Cajas de Entrada  -----

            //  -----  Elementos input  -----
            const entradas = document.getElementsByTagName('input');

            for (let i = 0; i < entradas.length; i++) {
                if (entradas[i].type == 'text') {
                    entradas[i].onblur = fondoBlanco;
                    entradas[i].onfocus = fondoAmarillo;
                }
            }
            entradas[0].focus();

            function fondoBlanco() { this.style.backgroundColor = 'white'; }
            function fondoAmarillo() { this.style.backgroundColor = 'yellow'; }


            // -----  Evento para los radio buttons del formulario "cajasEntrada"  -----
            const estadoCivilContacto = document.querySelectorAll('#cajasEntrada input[name=estado]');
            estadoCivilContacto.forEach((radio) => {
                radio.addEventListener('change', (event) => {
                    alert(`Estado Civil en contacto: ${event.target.value}`);
                });
            });


            //  -----  Listas Select y Option  -----  
            
            document.getElementById('fotoSelect').onchange = function (e) {
                const numValue = e.target.value;

                console.log("Valor seleccionado:", numValue); // Verifica el valor seleccionado

                // Si no se selecciona una imagen (opción con valor 0)
                if (numValue === "0") {
                    document.getElementById("salidaSelect").style.backgroundImage = ""; // Elimina la imagen
                    console.log("No se ha seleccionado ninguna imagen.");
                    return;
                }

                // Generar la URL para la imagen de fondo
                //const archivo = `url('imagenes/fondos/minis/fondo${numValue}.jpg')`;

                // Generar la URL para la imagen de fondo
                const archivo = `url('imagenes/fondos/fondo${numValue}.jpg')`;

                console.log("Ruta generada de la imagen:", archivo); // Verifica la ruta de la imagen en la consola

                // Asignar la imagen como fondo
                const salida = document.getElementById("salidaSelect");
                salida.style.backgroundImage = archivo;
                salida.style.backgroundSize = "cover"; // Ajustar el tamaño de la imagen
                salida.style.backgroundPosition = "center"; // Centrar la imagen
            };

        }


    </script>

</body>

</html>